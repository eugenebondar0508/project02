(()=>{"use strict";var e,t,n,o,r,a,c,l,u,i,d;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(){var e,r,a,c,l=(e=(new Date("21 july 2021").getTime()-(new Date).getTime())/1e3,r=Math.floor(e%60),a=Math.floor(e/60%60),c=Math.floor(e/60/60),e<=0&&(c="00",a="00",r="00"),{timeRemaining:e,hours:c,minutes:a,seconds:r});t.textContent=l.hours<10?("0"+l.hours).slice(-2):l.hours,n.textContent=l.minutes<10?("0"+l.minutes).slice(-2):l.minutes,o.textContent=l.seconds<10?("0"+l.seconds).slice(-2):l.seconds}setInterval((function(){r()}),1e3),r()})(),u=document.querySelector(".menu"),i=document.querySelector("menu"),document.querySelector("body"),d=function(){i.classList.toggle("active-menu")},u.addEventListener("click",d),i.addEventListener("click",(function(){"A"===event.target.tagName&&d(event)})),a=document.querySelector(".popup"),c=document.querySelectorAll(".popup-btn"),l=document.querySelector(".popup-content"),c.forEach((function(e){e.addEventListener("click",(function(){a.style.display="block"}))})),c.forEach((function(e){e.addEventListener("click",(function(){var e=Date.now();if(document.documentElement.clientWidth>768)var t=setInterval((function(){var n=Date.now()-e;l.style.top=n/5+"px",n>1e3&&clearInterval(t)}),20)}))})),a.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?a.style.display="none":(t=t.closest(".popup-content"))||(a.style.display="none")})),function(){for(var e=document.querySelector('a[href*="service-block"]'),t=document.querySelector('a[href*="portfolio"]'),n=document.querySelector('a[href*="calc"]'),o=document.querySelector('a[href*="command"]'),r=document.querySelector('a[href*="connect"]'),a=function(){var e=l[c];e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");document.querySelector(""+n).scrollIntoView({behavior:"smooth",block:"start"})}))},c=0,l=[e,t,n,o,r];c<l.length;c++)a()}(),n=document.querySelector(".service-header"),o=n.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab"),n.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&o.forEach((function(e,n){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?(o[t].classList.add("active"),r[t].classList.remove("d-none")):(o[t].classList.remove("active"),r[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content")),o=document.querySelector(".portfolio-dots"),r=0;!function(){for(var e=0;e<t.length;e++){var n=document.createElement("li");n.classList.add("dot"),o.append(n)}}();var a=document.querySelectorAll(".dot");a.forEach((function(){a[0].classList.add("dot-active")}));var c=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},u=function(){c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),++r>=t.length&&(r=0),l(t,r,"portfolio-item-active"),l(a,r,"dot-active")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(u,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(c(t,r,"portfolio-item-active"),c(a,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),l(t,r,"portfolio-item-active"),l(a,r,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)}(),(t=document.querySelector(".command")).addEventListener("mouseover",(function(){event.target.closest(".command__photo")&&(e=event.target.src,event.target.src=event.target.dataset.img)})),t.addEventListener("mouseout",(function(){event.target.closest(".command__photo")&&(event.target.src=e)})),function(){var e=document.querySelectorAll(".calc-item");function t(e){return e.replace(/\s+/g," ").replace(/^\s*/,"").replace(/\s*$/,"")}document.addEventListener("input",(function(){event.target.matches(".form-name")||event.target.matches("#form2-name")?event.target.value=event.target.value.replace(/[^А-Яа-яЁё\ '']/g,"").toLowerCase():event.target.matches(".form-email")?event.target.value=event.target.value.replace(/([^A-Za-z0-9\- _ @ . ! ~ * '])/g,""):event.target.matches(".form-phone")?event.target.value=event.target.value.replace(/[^0-9\+ ]/g,""):event.target.matches(".mess")&&(event.target.value=event.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9\s]+$/g,""))})),document.addEventListener("blur",(function(){event.target.matches(".form-name")||event.target.matches("#form2-name")?(event.target.value=t(event.target.value),event.target.value=event.target.value.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))):(event.target.matches(".form-email")||event.target.matches(".form-phone")||event.target.matches(".mess"))&&(event.target.value=t(event.target.value))}),!0),e.forEach((function(e){(e.matches(".calc-day")||e.matches(".calc-square")||e.matches(".calc-count"))&&e.addEventListener("input",(function(){e.value=e.value.replace(/\D/g,"")}))}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.getElementById("total"),c=document.querySelector(".calc-count"),l=function(){var t=0,l=1,u=1,i=n.options[n.selectedIndex].value,d=+o.value;c.value>1&&(l+=(c.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value>5&&r.value<10&&(u*=1.5),i&&d&&(t=e*i*d*l*u),a.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-day")||t.matches(".calc-count"))&&l()}))}(100),function(){var e="Загрузка...",t=document.getElementById("form1"),n=document.getElementById("form2"),o=document.getElementById("form3"),r=document.getElementById("form1-email"),a=document.getElementById("form2-email"),c=document.getElementById("form3-email"),l=document.getElementById("form1-phone"),u=document.getElementById("form2-phone"),i=document.getElementById("form3-phone"),d=document.querySelectorAll("input"),s=function(){d.forEach((function(e){e.value=""}))},m=(document.getElementById("form2-message"),document.createElement("div"));m.style.cssText="font-size: 2rem",document.addEventListener("submit",(function(d){if(d.preventDefault(),d.target.matches("form")){if(d.target.matches("#form1")){if(!r.value)return void(r.style.border="solid red");if(!r.value.match(/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i))return void(r.style.border="solid red");if(!l.value.match(/^\d[\d\(\)\ -]{4,14}\d$/))return void(l.style.border="solid red");r.style.border="none",l.style.border="none",t.appendChild(m),m.textContent=e}else if(d.target.matches("#form2")){if(!a.value)return void(a.style.border="solid red");if(!a.value.match(/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i))return void(a.style.border="solid red");if(!u.value.match(/^\d[\d\(\)\ -]{4,14}\d$/))return void(u.style.border="solid red");a.style.border="none",u.style.border="none",n.appendChild(m),m.textContent=e}else if(d.target.matches("#form3")){if(!c.value)return void(c.style.border="solid red");if(!c.value.match(/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i))return void(c.style.border="solid red");if(!i.value.match(/^\d[\d\(\)\ -]{4,14}\d$/))return void(i.style.border="solid red");o.appendChild(m),m.textContent=e,c.style.border="none",i.style.border="none",m.style.color="white"}if(m.textContent=e,d.target.matches("form")){var s=new FormData(d.target),f={};s.forEach((function(e,t){f[t]=e})),v(f).then((function(){m.textContent="Спасибо! Мы скоро с вами свяжемся"})).catch((function(e){m.textContent="Что-то пошло не так... ",console.log(e)}))}}}));var v=function(e){return new Promise((function(t,n){var o=new XMLHttpRequest;o.addEventListener("readystatechange",(function(){4===o.readyState&&(200===o.status?(t(),s()):(n(o.status),s()))})),o.open("POST","./server.php"),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e))}))}}()})();